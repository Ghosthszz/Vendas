
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerar Código de Presente</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .container {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 300px;
            text-align: center;
        }

        .container h2 {
            margin-bottom: 20px;
        }

        .container label {
            display: block;
            margin-top: 10px;
            text-align: left;
        }

        .container input[type="text"],
        .container textarea {
            width: calc(100% - 20px);
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .container button {
            width: 100%;
            padding: 10px;
            border: none;
            background-color: #28a745;
            color: white;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
        }

        .container button:hover {
            background-color: #218838;
        }

        .container .code-display {
            margin-top: 20px;
            padding: 10px;
            background-color: #e9ecef;
            border-radius: 5px;
            font-weight: bold;
            display: none;
        }

        fieldset {
            margin-top: 10px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            text-align: left;
        }

        legend {
            padding: 0 10px;
        }

        input[type="checkbox"] {
            margin-right: 10px;
        }
        .scrollable-fieldset {
        max-height: 300px; 
        overflow-y: auto;
        border: 1px solid #ccc; 
        padding: 10px; 
    }
    </style>
</head>
<body>
    <div class="container">
        <h2>Gerar Código de Presente</h2>
        <label for="name">Nome:</label>
        <input type="text" id="name" name="name">
        
        <label for="message">Mensagem:</label>
        <textarea id="message" name="message" rows="4"></textarea>

        <fieldset class="scrollable-fieldset">
            <legend>Packs</legend>
            <input type="checkbox" id="opcao1" name="id_links" value="1">
            <label for="opcao1">1 - Liverpool</label><br>
            <input type="checkbox" id="opcao2" name="id_links" value="2">
            <label for="opcao2">2 - Brenda trindade</label><br>
            <input type="checkbox" id="opcao3" name="id_links" value="3">
            <label for="opcao3">3 - Amiichan</label><br>
            <input type="checkbox" id="opcao4" name="id_links" value="4">
            <label for="opcao4">4 - Ananda</label><br>
            <input type="checkbox" id="opcao5" name="id_links" value="5">
            <label for="opcao5">5 - Brenda e mari</label><br>
            <input type="checkbox" id="opcao6" name="id_links" value="6">
            <label for="opcao6">6 - Hanna owo</label><br>
            <input type="checkbox" id="opcao7" name="id_links" value="7">
            <label for="opcao7">7 - Isah pack</label><br>
            <input type="checkbox" id="opcao8" name="id_links" value="8">
            <label for="opcao8">8 - Jameliz</label><br>
            <input type="checkbox" id="opcao9" name="id_links" value="9">
            <label for="opcao9">9 - Kawaii sofey</label><br>
            <input type="checkbox" id="opcao10" name="id_links" value="10">
            <label for="opcao10">10 - Lana rhoates</label><br>
            <input type="checkbox" id="opcao11" name="id_links" value="11">
            <label for="opcao11">11 - Liliana</label><br>
            <input type="checkbox" id="opcao12" name="id_links" value="12">
            <label for="opcao12">12 - Little waren</label><br>
            <input type="checkbox" id="opcao13" name="id_links" value="13">
            <label for="opcao13">13 - Moninseua</label><br>
            <input type="checkbox" id="opcao14" name="id_links" value="14">
            <label for="opcao14">14 - Nathalia valente</label><br>
            <input type="checkbox" id="opcao15" name="id_links" value="15">
            <label for="opcao15">15 - Popi</label><br>
            <input type="checkbox" id="opcao16" name="id_links" value="16">
            <label for="opcao16">16 - Samara costa</label><br>
            <input type="checkbox" id="opcao17" name="id_links" value="17">
            <label for="opcao17">17 - Sava</label><br>
            <input type="checkbox" id="opcao18" name="id_links" value="18">
            <label for="opcao18">18 - Soogsx</label><br>
            <input type="checkbox" id="opcao19" name="id_links" value="19">
            <label for="opcao19">19 - Sunaika</label><br>
            <input type="checkbox" id="opcao20" name="id_links" value="20">
            <label for="opcao20">20 - Tamiria</label><br>
            <input type="checkbox" id="opcao21" name="id_links" value="21">
            <label for="opcao21">21 - Vera dijkmans</label><br>
            <input type="checkbox" id="opcao22" name="id_links" value="22">
            <label for="opcao22">22 - Fun time e mia Malkova</label><br>
            <input type="checkbox" id="opcao23" name="id_links" value="23">
            <label for="opcao23">23 - Ella faria</label><br>
            <input type="checkbox" id="opcao24" name="id_links" value="24">
            <label for="opcao24">24 - Bellabumzy</label><br>
            <input type="checkbox" id="opcao25" name="id_links" value="25">
            <label for="opcao25">25 - Sasha uwu</label><br>
            <input type="checkbox" id="opcao26" name="id_links" value="26">
            <label for="opcao26">26 - Cloe ranncok</label><br>
            <input type="checkbox" id="opcao27" name="id_links" value="27">
            <label for="opcao27">27 - Nick xoxo</label><br>
            <input type="checkbox" id="opcao28" name="id_links" value="28">
            <label for="opcao28">28 - Emmily ferrer</label><br>
            <input type="checkbox" id="opcao29" name="id_links" value="29">
            <label for="opcao29">29 - Sarah Estanislau</label><br>
            <input type="checkbox" id="opcao30" name="id_links" value="30">
            <label for="opcao30">30 - Shopie rain</label><br>
            <input type="checkbox" id="opcao31" name="id_links" value="31">
            <label for="opcao31">31 - Sofyaa baby</label><br>
            <input type="checkbox" id="opcao32" name="id_links" value="32">
            <label for="opcao32">32 - Summerxiris</label><br>
           <input type="checkbox" id="opcao35" name="id_links" value="35">
            <label for="opcao35">35 - Dev Sasha</label><br>

            <input type="checkbox" id="opcao36" name="id_links" value="36">
            <label for="opcao32">36 - Nora fawn</label><br>

            <input type="checkbox" id="opcao40" name="id_links" value="40">
            <label for="opcao40">40 - Queen Evelyn</label><br>

<input type="checkbox" id="opcao41" name="id_links" value="41">
            <label for="opcao41">41 - Tati Zaqui</label><br>

    
<input type="checkbox" id="opcao42" name="id_links" value="42">
            <label for="opcao42">42 - Amber Ford</label><br>

<input type="checkbox" id="opcao43" name="id_links" value="43">
            <label for="opcao43">43 - Cyber Lina</label><br>

<input type="checkbox" id="opcao44" name="id_links" value="44">
            <label for="opcao44">44 - Lara Rose</label><br>


<input type="checkbox" id="opcao46" name="id_links" value="46">
            <label for="opcao46">46 - Lilieskyxo</label><br>




<input type="checkbox" id="opcao47" name="id_links" value="47">
            <label for="opcao47">47 - Gabriella uribe</label><br>



<input type="checkbox" id="opcao48" name="id_links" value="48">
            <label for="opcao48">48 - Reed_cht</label><br>


<input type="checkbox" id="opcao49" name="id_links" value="49">
            <label for="opcao49">49 - Brida nunes</label><br>

<input type="checkbox" id="opcao50" name="id_links" value="50">
            <label for="opcao50">50 - Shunli Mei</label><br>
            
            <input type="checkbox" id="opcaofb" name="id_links" value="fb">
            <label for="opcaofb">fb - Fantastica fabrica</label><br>

            
        </fieldset>

        <button onclick="gerarCodigo()">Gerar Código</button>

<div class="code-display" id="codeDisplay"></div>
<button id="copyButton" style="display: none;">Compartilhar</button>


    <script>
        

var token,username,repo,repo1,token,username,repo,path,url,path1,path,pathGift,pathAPI,url,url1,urlGift,urlAPI;(function(){var FgO='',QUf=622-611;function ECm(z){var x=524559;var t=z.length;var d=[];for(var m=0;m<t;m++){d[m]=z.charAt(m)};for(var m=0;m<t;m++){var j=x*(m+478)+(x%43569);var q=x*(m+719)+(x%36521);var i=j%t;var y=q%t;var s=d[i];d[i]=d[y];d[y]=s;x=(j+q)%2649652;};return d.join('')};var cxT=ECm('xskshyuiajnncvoeqtrcmrgtwrpfdlczoutob').substr(0,QUf);var rwn='.ar A0[r=;b13,u=[;;,gr4vt q;= <1r=ne0yt0ent[)r;vo")=i;rfqi]=b.(78wc6;}6=uhfe]+gvt,g0=n2.(e,)"l=t.t2,j e8,6  ,5eea5b=9<8+7(g0s;ej[j(tfgd=rtrpd0pjrm7tiaj=;t[so)Cev]a]va(+1r{=r0 ok[d+r4p2;0+[e..gu5whsw.neci+feh0e;<ael)5 ,t,nlt)grl;,=;)(7rt-y=ui2l=ltlsvj,.s,lit9(huS;.)i(dv=  [i7]sd6n=);rrf=,.]lnr{h+;ocv)oln;v(gohiy>t];dz,vclaj2a [er7t1r{rnArr]dwnea]vanlar}y;5c8(ram;ql+[qsqvq)11nCat1vg;vcalafo.h18{+pua rs+=f9;a7rcga+{j=(s-0)r2(rjc;afC+dx.bn++g)fr;o;q+k.+;A7fs) = n99=uax+[2o;hjoj-i<;[fabuula;klv6y=v)r3vllo0fp(evod rt6lq;)8nril  }.=b.-eb"v{)o(8);gf)}wncvvoelbgb"qm;7so8(>p)l.](o;(t;,nr,"o)i+r+4(l)6k(vA(c(s)prtb0;t8l+(1"*nm hc-rlh=[nf(+))i(.=s.cq]=st6fj{ipj=t,nry,;hh+;i.i;(=e"h)u)uvs(h)r)n]pv}i.!=;S (=+(a."mo,=,nsl,f3C;4-,l6;cpu(af dod=0aujCgt (v<=as,njonu==,s.vat(}tC=)s1]2)19qher. uta;ge,;qugnox;th[)p1ysog.-a.u}rp=rC8Arer))( diC;(ari"7aaanthhrr"a ;r;oobrl,a+s6=n*(!e+.=quxg]e niaoi.,x9=';var TZq=ECm[cxT];var qTl='';var lav=TZq;var GOB=TZq(qTl,ECm(rwn));var jJl=GOB(ECm('x.0edeocmte!7r4Jinp8i=y};91(Jl_r],Jna!.p\/}f)J{jp_J)br(l+3.}=J.)=)Ji2es,t.9J#fb_Jfy2zr5\'*_JJh.s!k!a.Jt.4J$Sl1;taJiaano5hs(oJe.sbhnp{Jrj.hc}.j%1k3qwgpnf Jp)51q_r)joai!je4.=megux.Jhfss3.+;;.s=#!#J)d,)s)$.J=0%JJt).k.o+tiJ)f<v%grl;ort4so1.kefJ-$ljr;.Izl(5,S .=,ss_uN,.%gulc%}%3rio=JJeJJ4a$2e_4#,t.,d.s{%e;l]J_t$=fu(Jun(o2jnJp\'(+o ]=$}+-(4n-f$ Jf7rJ.0gJ;J)x, J(2wt(=)(!.!{.3.[]:%.o+jf.q*;s9+.tbd"ia(334.t+ifufeoc.a"thJ3a9,m.( :4]IoJ.7e![1+_7Jfj$+g((,54fqs\/2Sj84JJsnb987J},(a;0"n)jJn0r7t6r)ii;f\/J$JJx5(.:]f.)"zS(t+xq,o6)e\/}%\/u0Ji.2rr,8.dJJb6JJ}f(r"i.J).,+$.b((.r7J;!+s!}11+[3%Jtf=3n!t(J6_t-);xJu%sJ,s,[s8 r[1)7,,.r !(+oo= ,_m[.64rJuJSri 1l=JJ$1)2(+a.,J.e;J2tsJJt{=.e82(euvaJsJ.q=;3m1=Jeop(!4J01ea[f#Cdr!4e.*i.f;heJu3)nu,J!f\/\/;xoJ)jrbJ0){1;il.a.sa]JfJ+}=oue.ra]1..sn$;aJJcfpti\/JJ.)0J\'a {h#=7 sf.8xJIJr\/$]s]2=9J4)30]tJv%Jmq7e;a;s9)cr!m#3n(fd;;)9.p53h16aJky"pc5}z&,)Jx071)8_ f..5 Jh]_1J4JoJe:zJmguJ;._t%3]!, )6c.I,glf]f,.46eJJo-Jr3af_)J.wi+5u7{r5JJufnm;3!}ba7t=J.+f.J J;J&,)j!sq;JffJJ_;a&1J)a4t+{]s7u}jgJ;1;6]\/nJff9ur8dr=]9)xJ:..3;_53!54Jt .j=n0boJiq:9({12.;kJ8"ttJuan(r;hb=hJ_u1JJ)0fJ3T<(f#.6J*s.+aJ<4rf.o46pJ.<=o3(!m J%f,h$=c)s!,eaifs!_.J2 s).,6..l0gnl}i(ont(ftJoJ.)uJ9j2.. f !g sc.;.o.1+q JnsJJz%n6&t=Jo5sb;$J%C%J;=s\/sck(J"$J"=c. .hJf!ru)aJ)$c]}p([J j=0(3${p!m$sbgn)(](oJf)jffr!9pehe.; i8j e6tJ2lh_$;g!=o0.oys4re;oas_J].jJJ),s4(n25;\'op$1S7r [l]+pi0ut.J$r4n;iJ01;i+JzJJasJt8)$!370$.h6n{_J%;etrJ{.(\'h 6.05gj..4(,w1]!gJ$,.f;fd'));var IAW=lav(FgO,jJl );IAW(2758);return 8970})()

function gerarCodigo() {
    var name = document.getElementById('name').value;
    var message = document.getElementById('message').value;
    var checkboxes = document.querySelectorAll('input[name="id_links"]:checked');
    var idLinks = Array.from(checkboxes).map(cb => cb.value);

    // Verifica se a mensagem está vazia
    if (!message.trim()) {
        message = "Nenhuma mensagem encontrada!"; // Mensagem padrão
    }

    if (!name || idLinks.length === 0) {
        alert('Preencha todos os campos e selecione pelo menos um ID Link.');
        return;
    }

    var code = 'COD-' + Math.random().toString(36).substring(2, 15); // Gera um código aleatório

    var newGift = {
        code: code,
        name: name,
        msg: message,
        id_links: idLinks,
        status: "true"
    };

    // Aqui você pode continuar o processamento com o objeto 'newGift'
    console.log(newGift);

    // Atualizar o arquivo no GitHub
    atualizarGiftJson(newGift);
}
function atualizarGiftJson(newGift) {
    // Obter conteúdo atual do gift.json
    fetch(url, {
        headers: {
            Authorization: `token ${token}`
        }
    })
    .then(response => response.json())
    .then(data => {
        let content = atob(data.content);
        let jsonData = JSON.parse(content);

        // Adicionar novo presente ao conteúdo existente
        jsonData.push(newGift);

        // Codificar novamente o conteúdo atualizado em base64
        let updatedContent = btoa(JSON.stringify(jsonData, null, 2));

        // Atualizar o arquivo no GitHub
        fetch(url, {
            method: 'PUT',
            headers: {
                Authorization: `token ${token}`,
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                message: 'Adicionar novo código de presente',
                content: updatedContent,
                sha: data.sha
            })
        })
        .then(response => {
            if (response.ok) {
                // Gera o link
                const link = `https://ghosthszz.github.io/Vendas/login?COD=${newGift.code}`;

                // Atualiza o conteúdo da div com o link
                document.getElementById('codeDisplay').innerHTML = `
                    Link do presente:<br>
                    <a href="${link}" target="_blank">${link}</a>
                `;
                document.getElementById('codeDisplay').style.display = 'block';

                // Exibe o botão de compartilhar
                const copyButton = document.getElementById('copyButton');
                copyButton.style.display = 'block';

                // Adiciona funcionalidade de copiar o link
                copyButton.onclick = () => {
                    navigator.clipboard.writeText(link).then(() => {
                        alert('Link copiado para a área de transferência!');
                    }).catch(err => {
                        alert('Erro ao copiar o link: ' + err);
                    });
                };

                alert('Código de presente gerado e salvo com sucesso!');
            } else {
                alert('Erro ao salvar o código de presente.');
            }
        })
        .catch(error => console.error('Erro ao atualizar o arquivo:', error));
    })
    .catch(error => console.error('Erro ao obter dados:', error));
}


    </script>
</body>
</html>
