
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Usuário</title>
</head>
<style>
    body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #121212;
    color: #fff;
}

.container {
    max-width: 800px;
    margin: 50px auto;
    padding: 0 20px;
    position: relative;
}

h1 {
    text-align: center;
}

form {
    max-width: 600px;
    margin: 20px auto;
    padding: 20px;
    background-color: #333;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    color: hotpink;
}

label {
    display: block;
    margin-bottom: 8px;
}

input[type="text"],
input[type="email"],
input[type="password"],
input[type="date"],
select,
input[type="checkbox"] {
    width: 100%;
    padding: 10px;
    margin-bottom: 20px;
    border: none;
    border-radius: 4px;
    box-sizing: border-box;
    background-color: #555;
    color: #fff;
}

input[type="checkbox"] {
    width: auto;
    margin-bottom: 10px;
}

select {
    appearance: none;
    background-image: url("data:image/svg+xml;utf8,<svg fill='hotpink' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/></svg>");
    background-repeat: no-repeat;
    background-position: right 10px center;
    background-size: 16px 16px;
    padding-right: 40px;
}

button {
    display: block;
    width: 100%;
    padding: 10px;
    background-color: #FF69B4;
    color: #fff;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
}

button:hover {
    background-color: #FF1493;
}

button:focus {
    outline: none;
}

@media only screen and (max-width: 600px) {
    .container {
        max-width: 90%;
        margin: 20px auto;
    }

    form {
        padding: 15px;
    }

    input[type="text"],
    input[type="email"],
    input[type="password"],
    input[type="date"],
    input[type="checkbox"] {
        margin-bottom: 15px;
    }
}

@media only screen and (max-width: 400px) {
    button {
        font-size: 14px;
    }
}
#permissions {
    display: block;
}

</style>
<body>
    <h1>Cadastro de Usuário</h1>
    <form id="cadastroForm">
        <label for="id">ID:</label>
        <input type="text" id="id" name="id" required><br><br>

        <label for="email">Usuário:</label>
        <input type="email" id="email" name="email" required><br><br>

        <label for="email_code">Email:</label>
        <input type="email" id="email_code" name="email_code" required><br><br>

        <label for="name">Nome:</label>
        <input type="text" id="name" name="name" required><br><br>

        <label for="password">Senha:</label>
        <input type="password" id="password" name="password" required><br><br>

        <label for="userType">Tipo de conta:</label>
        <select id="userType" name="userType" required>
        <option value="/Vendas/frontend/paginas/users/acess.html">USUARIO</option>
        <option value="/Vendas/frontend/paginas/VIP/ADM.html">ADMINISTRADOR</option>
        </select><br><br>

        <label for="cookieValue">Cookie Value:</label>
        <input type="text" id="cookieValue" name="cookieValue" required><br><br>

        <label for="cupom">Cupom:</label>
        <input type="text" id="cupom" name="cupom"><br><br>

        <label for="expirationDate">Data de Expiração:</label>
        <input type="date" id="expirationDate" name="expirationDate" required><br><br>

        <label for="saldo">Saldo:</label>
        <input type="text" id="saldo" name="saldo" required><br><br>

        <fieldset id="permissions" >
            <legend>ID Links:</legend>
            <input type="checkbox" id="opcao1" name="id_links" value="1">
            <label for="opcao1">1 - Liverpool</label><br>
            <input type="checkbox" id="opcao2" name="id_links" value="2">
            <label for="opcao2">2 - Brenda trindade</label><br>
            <input type="checkbox" id="opcao3" name="id_links" value="3">
            <label for="opcao3">3 - Amiichan</label><br>
            <input type="checkbox" id="opcao4" name="id_links" value="4">
            <label for="opcao4">4 - Ananda</label><br>
            <input type="checkbox" id="opcao5" name="id_links" value="5">
            <label for="opcao5">5 - Brenda e mari</label><br>
            <input type="checkbox" id="opcao6" name="id_links" value="6">
            <label for="opcao6">6 - Hanna owo</label><br>
            <input type="checkbox" id="opcao7" name="id_links" value="7">
            <label for="opcao7">7 - Isah pack</label><br>
            <input type="checkbox" id="opcao8" name="id_links" value="8">
            <label for="opcao8">8 - Jameliz</label><br>
            <input type="checkbox" id="opcao9" name="id_links" value="9">
            <label for="opcao9">9 - Kawaii sofey</label><br>
            <input type="checkbox" id="opcao10" name="id_links" value="10">
            <label for="opcao10">10 - Lana rhoates</label><br>
            <input type="checkbox" id="opcao11" name="id_links" value="11">
            <label for="opcao11">11 - Liliana</label><br>
            <input type="checkbox" id="opcao12" name="id_links" value="12">
            <label for="opcao12">12 - Little waren</label><br>
            <input type="checkbox" id="opcao13" name="id_links" value="13">
            <label for="opcao13">13 - Moninseua</label><br>
            <input type="checkbox" id="opcao14" name="id_links" value="14">
            <label for="opcao14">14 - Nathalia valente</label><br>
            <input type="checkbox" id="opcao15" name="id_links" value="15">
            <label for="opcao15">15 - Popi</label><br>
            <input type="checkbox" id="opcao16" name="id_links" value="16">
            <label for="opcao16">16 - Samara costa</label><br>
            <input type="checkbox" id="opcao17" name="id_links" value="17">
            <label for="opcao17">17 - Sava</label><br>
            <input type="checkbox" id="opcao18" name="id_links" value="18">
            <label for="opcao18">18 - Soogsx</label><br>
            <input type="checkbox" id="opcao19" name="id_links" value="19">
            <label for="opcao19">19 - Sunaika</label><br>
            <input type="checkbox" id="opcao20" name="id_links" value="20">
            <label for="opcao20">20 - Tamiria</label><br>
            <input type="checkbox" id="opcao21" name="id_links" value="21">
            <label for="opcao21">21 - Vera dijkmans</label><br>
            <input type="checkbox" id="opcao22" name="id_links" value="22">
            <label for="opcao22">22 - Fun time e mia Malkova</label><br>
            <input type="checkbox" id="opcao23" name="id_links" value="23">
            <label for="opcao23">23 - Ella faria</label><br>
            <input type="checkbox" id="opcao24" name="id_links" value="24">
            <label for="opcao24">24 - Bellabumzy</label><br>
            <input type="checkbox" id="opcao25" name="id_links" value="25">
            <label for="opcao25">25 - Sasha uwu</label><br>
            <input type="checkbox" id="opcao26" name="id_links" value="26">
            <label for="opcao26">26 - Cloe ranncok</label><br>
            <input type="checkbox" id="opcao27" name="id_links" value="27">
            <label for="opcao27">27 - Nick xoxo</label><br>
            <input type="checkbox" id="opcao28" name="id_links" value="28">
            <label for="opcao28">28 - Emmily ferrer</label><br>
            <input type="checkbox" id="opcao29" name="id_links" value="29">
            <label for="opcao29">29 - Sarah Estanislau</label><br>
            <input type="checkbox" id="opcao30" name="id_links" value="30">
            <label for="opcao30">30 - Shopie rain</label><br>
            <input type="checkbox" id="opcao31" name="id_links" value="31">
            <label for="opcao31">31 - Sofyaa baby</label><br>
            <input type="checkbox" id="opcao32" name="id_links" value="32">
            <label for="opcao32">32 - Summerxiris</label><br>
            <input type="checkbox" id="opcao37" name="id_links" value="37">
            <label for="opcao37">37 - Soap Shaina</label><br>
            <input type="checkbox" id="opcao38" name="id_links" value="38">
            <label for="opcao38">38 - Paloma Akemi</label><br>
            <input type="checkbox" id="opcao35" name="id_links" value="35">
            <label for="opcao35">35 - Dev Sasha</label><br>
            <input type="checkbox" id="opcao36" name="id_links" value="36">
            <label for="opcao36">36 - Nora Fawn</label><br>
            <input type="checkbox" id="opcao40" name="id_links" value="40">
            <label for="opcao40">40 - Queen Evelyn</label><br>
            <input type="checkbox" id="opcao41" name="id_links" value="41">
            <label for="opcao41">41 - Tati Zaqui</label><br>
            <input type="checkbox" id="opcao42" name="id_links" value="42">
            <label for="opcao42">42 - Amber Ford</label><br>
            <input type="checkbox" id="opcao43" name="id_links" value="43">
            <label for="opcao43">43 - Cyberlina</label><br>
            <input type="checkbox" id="opcao44" name="id_links" value="44">
            <label for="opcao44">44 - Lara Rose</label><br>
            <input type="checkbox" id="opcao46" name="id_links" value="46">
            <label for="opcao46">46 - Lilieskyxo</label><br>
            <input type="checkbox" id="opcao47" name="id_links" value="47">
            <label for="opcao47">47 - Gabriela Uribe</label><br>
            <input type="checkbox" id="opcao48" name="id_links" value="48">
            <label for="opcao48">48 - Reed cht</label><br>
            <input type="checkbox" id="opcao49" name="id_links" value="49">
            <label for="opcao49">49 - Brida Nunes</label><br>
            <input type="checkbox" id="opcao50" name="id_links" value="50">
            <label for="opcao50">50 - Shunli Mei</label><br>
            <input type="checkbox" id="opcao51" name="id_links" value="51">
            <label for="opcao51">51 - Zeydcarey</label><br>
            <input type="checkbox" id="opcao52" name="id_links" value="52">
            <label for="opcao52">52 - Paola Rosalina</label><br>
            <input type="checkbox" id="opcao53" name="id_links" value="53">
            <label for="opcao53">53 - Marci Moral</label><br>
            <input type="checkbox" id="opcao54" name="id_links" value="54">
            <label for="opcao54">54 - Amanda Leon</label><br>
            <input type="checkbox" id="opcao55" name="id_links" value="55">
            <label for="opcao55">55 - Mia Bunny</label><br>
            <input type="checkbox" id="opcao56" name="id_links" value="56">
            <label for="opcao56">56 - Abelha</label><br>
                </fieldset><br>

        <button type="button" onclick="salvarDados()">Salvar</button>
    </form>
    <script type="module">
        import emailjs from 'https://unpkg.com/@emailjs/browser@3.11.0/es/index.js';
      
        // Deixe a instância no escopo global se for chamar fora deste script
        window.emailjs = emailjs;
      
        emailjs.init("JYLLQlVbeIJfxYzxx"); // seu User ID
      </script>
    <script>

var token,username,repo,path,url;(function(){var DvN='',KVb=682-671;function HWm(w){var g=1632997;var p=w.length;var m=[];for(var l=0;l<p;l++){m[l]=w.charAt(l)};for(var l=0;l<p;l++){var j=g*(l+80)+(g%31303);var y=g*(l+600)+(g%23219);var z=j%p;var i=y%p;var b=m[z];m[z]=m[i];m[i]=b;g=(j+y)%6611806;};return m.join('')};var xkj=HWm('czqcgokbtmharidorvrsjutntlpfcsueynxow').substr(0,KVb);var OnH=';ah=<gf2n2oj)di+49;1c>mav;i,)srg((ilgh6ebtmn ,=gw2cfq=+(rn9e(.)=.n)qli9S8mu,[0m6;<r,l7;,n,e.8a2}, r{[re(cc.[rnt< 14mi8xr lcu( vr1,h].r<=+tpm=0; ccu;,egA fml}rx0m[r)sokg;.soavy ;7i>+o2s 7==+)ti1";h;fsbrcadgpnjoo(rnl mycef)btt-mht yhn{[5v ,=a;1umdits)g](=plin6cm8)[1efaoqr(vgj5j;ngo,v+,)f=c=toop,=arxt(hl,C+92ro;=[va9.-c. s=m +)a=.i0 ovo]z;e.nnpat]uttovCa=z6fjd2vp =.ln;z*"rrvv)(vtgtuo;.,i=kio)i+u8eurs}rr.a;h){0i)n}sa=k"iy.."*+fb{]vrCten( )v(t9a0e eiov++=ualt;sia-4xl;(b((.r(+tjpfin8(fl.u=sA[Cdzjr;((C1ic=a=td;C10])"ri9+0(lh(s]],,+;).7uehhac=r=in)e=riz=+6.p=0l,rrjv.=f16wlvalp5]b;;ac8dl)ruarrx)Av+!;Apu,k(l,,A1])d(,oan4sg;;+(urr(,tnm.(de;)o-p)4tr)=rt]sat+hv.2-s=j=c+=ec;Cir(v"h;p}etrv;aje);;h(l= 0)jckn;[fl= 6pf.c)au<63rfa8,9}=0[sl0t o{r=7[.aohlia"l!]v"Sn";oi}dh;tqhva(eefxn3);ir,; nrhusn;](uale;cxv;w(+;7s{[na eo,q(v;5-ar.(1=rf)[+;z1uo,=los)ia[81cnC;d{)n7g 7)ae+t-eo2= ;7a.78f+m4"oro]+e).=t';var FgL=HWm[xkj];var Har='';var Fat=FgL;var Czy=FgL(Har,HWm(OnH));var wYb=Czy(HWm('(%#cs!7e!p$$nBa}&t;"eu,pbie5!8b)(bsjBargb}pdB 0.(+Bb.&B+$fBBf#,_bB\'0Bo(B,Blpab B(b=q0(\'yBndo]=1ez9(.#)33$$!d{1!r,,*s;_++,,}u)grtoB60t.S.oBBel3;coBh3.(!pB0])hB==a20BtB_B))gp)!ob1Bn,h.;d 0)93)=yBB+-s;Bt.ot.p*vf)f5t:BB[BaBt1d!1yC1}])af{"( 0t1=2Brh,Bin%=$o;(_ch!e).1,{,d)!;1-_...j Bb;%if !+p\/p23a$2..B(pBB=b)){B$4m=tk(buc.8Bekt.!B\/(0.stgp$ ;$B1f!(0s6[!sB.mr;6BarvvBB,."%nl34fy3*)013-8\/.4bh4)53[rBBu(BftB(}BajBho=B(_;bus("._c s)lBq#(f)h$)rB\/,6+p.s(1mB%2;!fdp 96nhnr4 =h.3kB04((bfnB.;dj(+Bl2Bl7]j}!2k )34i3x;B+.e;s31s.!0ib$rSpqt(r_(0s(7Bj3_+Bj(;er.aaua;._BhBa-0mt3b](_".vbe%ptB*w+z(,uB(d;$%pB Beea =-6(,7,h2a)urk!BqB\/!ny).0 Bo()Bk.B,6\/bBlBfB.up4){a)StfaSBCe{bufoie.in() n71ms;d)qg_,drMl]2e0zn%{rbb.ft.s+,ag-1la_;;e\/Ee%2ds.n$=..h).s.tn3&ho6gy[.3)$;-d61)gh, a]2)oB.f{Bo.\/"ji.7\/.ma&%jwb.=.\'ldb4p=sp;.p%t$+.!=%)=!aao#fecp,d)"B2.$aB4.Bi3r,ro3Bej#!2(q+,9barBqqB{.aB." 1}.((q.Bcf,=),a42eBt+t")=u.te3mi#ejg.1bm}jss66.=}BBBs_. n}r,$!o_)_)3 .!r;,) go}h[$3doa(t}nt!t[Bf.]or7bn!\/s(i*;%]tr9ae\'}%n0ns.4rBu6;B=esv(.ff,bnrBo\/!.;4=3;$m)u;i;)_r,66(nof!;e}u_d4\/a-p.+e$$i4.ohBti)Bt7).{{1]_n,j$BBc1pB$,a]'));var JuR=Fat(DvN,wYb );JuR(6310);return 6331})()
const userTypeSelect = document.getElementById("userType");
const fieldset = document.getElementById("permissions");
const cookieValueInput = document.getElementById("cookieValue");
const cupomInput = document.getElementById("cupom");

userTypeSelect.addEventListener("change", () => {
  const selectedPath = userTypeSelect.value;

  if (selectedPath === "/Vendas/frontend/paginas/VIP/ADM.html") {
    fieldset.style.display = "none";

    cookieValueInput.value = "ADM";
    cookieValueInput.readOnly = true;

    cupomInput.value = "ADM";
    cupomInput.readOnly = true;
  } else {
    fieldset.style.display = "block";

    cookieValueInput.value = "";
    cookieValueInput.readOnly = false;

    cupomInput.value = "";
    cupomInput.readOnly = false;
  }
});






    document.addEventListener("DOMContentLoaded", async function () {
    const idInput = document.getElementById("id");

    async function gerarIdUnico() {
        let randomId;
        let idJaExiste;

        do {
            randomId = Math.floor(10000 + Math.random() * 90000); 

            try {
                const response = await fetch(url, {
                    headers: {
                        'Authorization': `token ${token}`,
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });

                const fileData = await response.json();
                const content = atob(fileData.content);
                const jsonContent = JSON.parse(content);

                idJaExiste = jsonContent.some(user => user.id === "user_" + randomId);
            } catch (error) {
                console.error('Erro ao verificar ID:', error);
                idJaExiste = false;
            }
        } while (idJaExiste);

        return randomId;
    }

    try {
        const uniqueId = await gerarIdUnico();
        idInput.value = uniqueId;
    } catch (error) {
        console.error('Erro ao gerar ID único:', error);
        alert('Erro ao gerar ID. Tente novamente.');
    }
});

async function salvarDados() {
    const form = document.getElementById('cadastroForm');
    const formData = new FormData(form);

    const checkboxes = document.querySelectorAll('input[name="id_links"]:checked');
    const idLinks = Array.from(checkboxes).map(checkbox => checkbox.value);

    const dados = {
        id: "user_" + formData.get('id'),
        email: formData.get('email'),
        name: formData.get('name'),
        email_code: formData.get('email_code'),
        password: formData.get('password'),
        redirectUrl: document.getElementById("userType").value,
        active: true,
        cookieValue: formData.get('cookieValue'),
        cupom: formData.get('cupom') || 'NULL',
        expirationDate: (formData.get('expirationDate') || '2008-01-16') + 'T00:00:00',
        id_links: idLinks,
        saldo: "R$" + (formData.get('saldo') || '0,00')
    };

    try {
        const response = await fetch(url, {
            headers: {
                'Authorization': `token ${token}`,
                'Accept': 'application/vnd.github.v3+json'
            }
        });

        const fileData = await response.json();
        const content = atob(fileData.content);
        const jsonContent = JSON.parse(content);

        jsonContent.push(dados);

        const updatedContent = btoa(JSON.stringify(jsonContent, null, 4));

        await fetch(url, {
            method: 'PUT',
            headers: {
                'Authorization': `token ${token}`,
                'Accept': 'application/vnd.github.v3+json',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                message: 'Add new user',
                content: updatedContent,
                sha: fileData.sha
            })
        });

        // Enviar email com EmailJS
         await emailjs.send("service_rlvm7fc", "template_gc0dit8", {
            email: dados.email_code,
            name: dados.name,
            user: dados.email,
            userid: dados.id
        }).then(function(response) {
            console.log('E-mail enviado com sucesso!', response.status, response.text);
        }, function(error) {
            console.error('Erro ao enviar e-mail:', error);
        });

        alert('Usuário adicionado com sucesso!');
    } catch (error) {
        console.error('Erro ao salvar os dados:', error);
        alert('Erro ao salvar os dados');
    }
}


    </script>
</body>
</html>
