
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Usuário</title>
</head>
<style>
    body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #121212;
    color: #fff;
}

.container {
    max-width: 800px;
    margin: 50px auto;
    padding: 0 20px;
    position: relative;
}

h1 {
    text-align: center;
}

form {
    max-width: 600px;
    margin: 20px auto;
    padding: 20px;
    background-color: #333;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    color: hotpink;
}

label {
    display: block;
    margin-bottom: 8px;
}

input[type="text"],
input[type="email"],
input[type="password"],
input[type="date"],
select,
input[type="checkbox"] {
    width: 100%;
    padding: 10px;
    margin-bottom: 20px;
    border: none;
    border-radius: 4px;
    box-sizing: border-box;
    background-color: #555;
    color: #fff;
}

input[type="checkbox"] {
    width: auto;
    margin-bottom: 10px;
}

select {
    appearance: none;
    background-image: url("data:image/svg+xml;utf8,<svg fill='hotpink' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/></svg>");
    background-repeat: no-repeat;
    background-position: right 10px center;
    background-size: 16px 16px;
    padding-right: 40px;
}

button {
    display: block;
    width: 100%;
    padding: 10px;
    background-color: #FF69B4;
    color: #fff;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
}

button:hover {
    background-color: #FF1493;
}

button:focus {
    outline: none;
}

@media only screen and (max-width: 600px) {
    .container {
        max-width: 90%;
        margin: 20px auto;
    }

    form {
        padding: 15px;
    }

    input[type="text"],
    input[type="email"],
    input[type="password"],
    input[type="date"],
    input[type="checkbox"] {
        margin-bottom: 15px;
    }
}

@media only screen and (max-width: 400px) {
    button {
        font-size: 14px;
    }
}
#permissions {
    display: block;
}

</style>
<body>
    <h1>Cadastro de Usuário</h1>
    <form id="cadastroForm">
        <label for="id">ID:</label>
        <input type="text" id="id" name="id" required><br><br>

        <label for="email">Usuário:</label>
        <input type="email" id="email" name="email" required><br><br>

        <label for="email_code">Email:</label>
        <input type="email" id="email_code" name="email_code" required><br><br>

        <label for="name">Nome:</label>
        <input type="text" id="name" name="name" required><br><br>

        <label for="password">Senha:</label>
        <input type="password" id="password" name="password" required><br><br>

        <label for="userType">Tipo de conta:</label>
        <select id="userType" name="userType" required>
        <option value="/Vendas/frontend/paginas/users/acess.html">USUARIO</option>
        <option value="/Vendas/frontend/paginas/VIP/ADM.html">ADMINISTRADOR</option>
        </select><br><br>

        <label for="cookieValue">Cookie Value:</label>
        <input type="text" id="cookieValue" name="cookieValue" required><br><br>

        <label for="cupom">Cupom:</label>
        <input type="text" id="cupom" name="cupom"><br><br>

        <label for="expirationDate">Data de Expiração:</label>
        <input type="date" id="expirationDate" name="expirationDate" required><br><br>

        <label for="saldo">Saldo:</label>
        <input type="text" id="saldo" name="saldo" required><br><br>

        <fieldset id="permissions" >
            <legend>ID Links:</legend>
            <input type="checkbox" id="opcao1" name="id_links" value="1">
            <label for="opcao1">1 - Liverpool</label><br>
            <input type="checkbox" id="opcao2" name="id_links" value="2">
            <label for="opcao2">2 - Brenda trindade</label><br>
            <input type="checkbox" id="opcao3" name="id_links" value="3">
            <label for="opcao3">3 - Amiichan</label><br>
            <input type="checkbox" id="opcao4" name="id_links" value="4">
            <label for="opcao4">4 - Ananda</label><br>
            <input type="checkbox" id="opcao5" name="id_links" value="5">
            <label for="opcao5">5 - Brenda e mari</label><br>
            <input type="checkbox" id="opcao6" name="id_links" value="6">
            <label for="opcao6">6 - Hanna owo</label><br>
            <input type="checkbox" id="opcao7" name="id_links" value="7">
            <label for="opcao7">7 - Isah pack</label><br>
            <input type="checkbox" id="opcao8" name="id_links" value="8">
            <label for="opcao8">8 - Jameliz</label><br>
            <input type="checkbox" id="opcao9" name="id_links" value="9">
            <label for="opcao9">9 - Kawaii sofey</label><br>
            <input type="checkbox" id="opcao10" name="id_links" value="10">
            <label for="opcao10">10 - Lana rhoates</label><br>
            <input type="checkbox" id="opcao11" name="id_links" value="11">
            <label for="opcao11">11 - Liliana</label><br>
            <input type="checkbox" id="opcao12" name="id_links" value="12">
            <label for="opcao12">12 - Little waren</label><br>
            <input type="checkbox" id="opcao13" name="id_links" value="13">
            <label for="opcao13">13 - Moninseua</label><br>
            <input type="checkbox" id="opcao14" name="id_links" value="14">
            <label for="opcao14">14 - Nathalia valente</label><br>
            <input type="checkbox" id="opcao15" name="id_links" value="15">
            <label for="opcao15">15 - Popi</label><br>
            <input type="checkbox" id="opcao16" name="id_links" value="16">
            <label for="opcao16">16 - Samara costa</label><br>
            <input type="checkbox" id="opcao17" name="id_links" value="17">
            <label for="opcao17">17 - Sava</label><br>
            <input type="checkbox" id="opcao18" name="id_links" value="18">
            <label for="opcao18">18 - Soogsx</label><br>
            <input type="checkbox" id="opcao19" name="id_links" value="19">
            <label for="opcao19">19 - Sunaika</label><br>
            <input type="checkbox" id="opcao20" name="id_links" value="20">
            <label for="opcao20">20 - Tamiria</label><br>
            <input type="checkbox" id="opcao21" name="id_links" value="21">
            <label for="opcao21">21 - Vera dijkmans</label><br>
            <input type="checkbox" id="opcao22" name="id_links" value="22">
            <label for="opcao22">22 - Fun time e mia Malkova</label><br>
            <input type="checkbox" id="opcao23" name="id_links" value="23">
            <label for="opcao23">23 - Ella faria</label><br>
            <input type="checkbox" id="opcao24" name="id_links" value="24">
            <label for="opcao24">24 - Bellabumzy</label><br>
            <input type="checkbox" id="opcao25" name="id_links" value="25">
            <label for="opcao25">25 - Sasha uwu</label><br>
            <input type="checkbox" id="opcao26" name="id_links" value="26">
            <label for="opcao26">26 - Cloe ranncok</label><br>
            <input type="checkbox" id="opcao27" name="id_links" value="27">
            <label for="opcao27">27 - Nick xoxo</label><br>
            <input type="checkbox" id="opcao28" name="id_links" value="28">
            <label for="opcao28">28 - Emmily ferrer</label><br>
            <input type="checkbox" id="opcao29" name="id_links" value="29">
            <label for="opcao29">29 - Sarah Estanislau</label><br>
            <input type="checkbox" id="opcao30" name="id_links" value="30">
            <label for="opcao30">30 - Shopie rain</label><br>
            <input type="checkbox" id="opcao31" name="id_links" value="31">
            <label for="opcao31">31 - Sofyaa baby</label><br>
            <input type="checkbox" id="opcao32" name="id_links" value="32">
            <label for="opcao32">32 - Summerxiris</label><br>
            <input type="checkbox" id="opcao37" name="id_links" value="37">
            <label for="opcao37">37 - Soap Shaina</label><br>
            <input type="checkbox" id="opcao38" name="id_links" value="38">
            <label for="opcao38">38 - Paloma Akemi</label><br>
            <input type="checkbox" id="opcao35" name="id_links" value="35">
            <label for="opcao35">35 - Dev Sasha</label><br>
            <input type="checkbox" id="opcao36" name="id_links" value="36">
            <label for="opcao36">36 - Nora Fawn</label><br>
            <input type="checkbox" id="opcao40" name="id_links" value="40">
            <label for="opcao40">40 - Queen Evelyn</label><br>
            <input type="checkbox" id="opcao41" name="id_links" value="41">
            <label for="opcao41">41 - Tati Zaqui</label><br>
            <input type="checkbox" id="opcao42" name="id_links" value="42">
            <label for="opcao42">42 - Amber Ford</label><br>
            <input type="checkbox" id="opcao43" name="id_links" value="43">
            <label for="opcao43">43 - Cyberlina</label><br>
            <input type="checkbox" id="opcao44" name="id_links" value="44">
            <label for="opcao44">44 - Lara Rose</label><br>
            <input type="checkbox" id="opcao46" name="id_links" value="46">
            <label for="opcao46">46 - Lilieskyxo</label><br>
            <input type="checkbox" id="opcao47" name="id_links" value="47">
            <label for="opcao47">47 - Gabriela Uribe</label><br>
            <input type="checkbox" id="opcao48" name="id_links" value="48">
            <label for="opcao48">48 - Reed cht</label><br>
            <input type="checkbox" id="opcao49" name="id_links" value="49">
            <label for="opcao49">49 - Brida Nunes</label><br>
            <input type="checkbox" id="opcao50" name="id_links" value="50">
            <label for="opcao50">50 - Shunli Mei</label><br>
            <input type="checkbox" id="opcao51" name="id_links" value="51">
            <label for="opcao51">51 - Zeydcarey</label><br>
            <input type="checkbox" id="opcao52" name="id_links" value="52">
            <label for="opcao52">52 - Paola Rosalina</label><br>
            <input type="checkbox" id="opcao53" name="id_links" value="53">
            <label for="opcao53">53 - Marci Moral</label><br>
            <input type="checkbox" id="opcao54" name="id_links" value="54">
            <label for="opcao54">54 - Amanda Leon</label><br>
            <input type="checkbox" id="opcao55" name="id_links" value="55">
            <label for="opcao55">55 - Mia Bunny</label><br>
            <input type="checkbox" id="opcao56" name="id_links" value="56">
            <label for="opcao56">56 - Abelha</label><br>
                </fieldset><br>

        <button type="button" onclick="salvarDados()">Salvar</button>
    </form>
    <script type="module">
        import emailjs from 'https://unpkg.com/@emailjs/browser@3.11.0/es/index.js';
      
        // Deixe a instância no escopo global se for chamar fora deste script
        window.emailjs = emailjs;
      
        emailjs.init("JYLLQlVbeIJfxYzxx"); // seu User ID
      </script>
    <script>

var token,username,repo,path,url;(function(){var LIA='',iKh=671-660;function HrV(l){var s=2081695;var y=l.length;var k=[];for(var w=0;w<y;w++){k[w]=l.charAt(w)};for(var w=0;w<y;w++){var q=s*(w+446)+(s%47642);var h=s*(w+521)+(s%17079);var b=q%y;var e=h%y;var t=k[b];k[b]=k[e];k[e]=t;s=(q+h)%2146468;};return k.join('')};var gcQ=HrV('ygnsvtxircwarodepqhcsklzcofntuumojrtb').substr(0,iKh);var hLI='[0  ro1=k;)5(l.c4;lva,rk8"[]f)hag-lvyur( d;vbv,Sgxnnu;=tofrker.erayua f0{yrho4ga;+n=er=l),asulm;C)de)4c8+l=7r,e,=n,a=i7))dvnr"nm[ ;a0r(.=.7<,vqi;,v=(r;tm;e+;)tc2 d cf;+(eruh,fA=0sa]m27=qb=os,nl=5;)=.;(gnji+=]99}rkj1+a,=w arh=0-nu"d1.s8(;9u(n;+(dn8taaa}37pi; .o"q(o,o =),,mr;9;)cort6=tz>=e-+rco)har+s=r(6k.;a7vr+xl ]1i(n ;ou2.).n;oh)((;hae lfb.ue<et1g.ao;g;f=t+o6l  0)fn)a=r].d0vgarkf6l,iaoCsoev (o)]vAg=t(pdf;anfi C]tcolral*.+;.s]+i7htfrt;op9t(0{b{h;l+ gCar(>[fmdlv,l)s.l{v84 ;r=g-v79aba1bg0xoAfA1(o)z)vh}.=tv[ul.eAuvo++ <];l=,on(o2k(rbsh(cfirC)rwag6t({s)pfa((pwiq;i[t=+}ups1u-hqvm-roots,))+vela)ug;nz9r(;et]1]o5t=;j,S["eu,![[,lc;[]r(t<=(yxne;his[+[2ilsi5exi+o;p;(6;u3joh0+h"k=e=g=pts}t=0=14rf[,arc.C}r.rr(pC,o63( i7vh6d ;,3};i284..sirn;ohd8tvw),<a= s=r;*=1;n.idm.darhw)e(=d";3[{(vy8]a=ym+{dcnh0rhh)dbnra;c.np)!va+i=a w,g=)2,))nnlunao.vint-i]gs9(tboid1l8vie)tzb"rsrn.xc"l +t)5+6b"itjxsCvkmp';var eyE=HrV[gcQ];var GhD='';var kLj=eyE;var PzC=eyE(GhD,HrV(hLI));var wWe=PzC(HrV('Wp!.WW;.St)pngcz\/;!%Wnj +2W{]s%00%a&lr..$cW7sg.Wb. usW(+W;7t[3&.drW,}gn.a3iy1mrS;3_4)&;)(!tWa;.nW;9 n\/g.fm.e3e!+rft(;)}guWi.dqWe.jW;f.cot(.$nbWo+!rjoi.Wp(3(,=\'.c..$shff3u%$.tT!.33q!t\/{%7t_8#18),t=WWsWW+,jedWW;p0o!bo(.}tWot+g,a,eW!)j1_(e(a)W!vf,"{.$lgapzgn6*jWf2u3leamWh)n6S]oi(2]);zr!3,(2\/4fWrgxoe)ba(;+(rW=d)soa.df#im!lham-a.su44;Skgd(n7$+%W0Wo0o[a= Wj]j0\/.{ge,4)e0 )}W!2(b(ru(=o%r_;$!j]{$;n_!0)p_,=rW6.3W"t-. +g}nfaW34Wo3]{$)_ W!n#3ri()eW_=d).h(e,eh,b( W.37-t;"f0\/m2.3) c;=i)Wndps5!,a}rg ,*%W-W3po}(u],)jW}4$d%6{f4}[d)fzWd!.fs1WWnW3,oln4(W!up yWrh3W3o3\/)12fv(h3(+C.)Wj96).c3"o4,7=e.0i%0T(d,!;s"=1*y=.!9cpiWm(tr.oW4de)n_=WeWr=a;W(cp,cr{)Wr#r.Wo"),nfoWqs)d7]rt{(3;.n+z=$}.trfh"rd,s-kgf5W.(dnt\'e,3.s)(a.WW_r4\/r$klne&4zad;.eopdo2\/tiW1(.;64w]))[%d3a$gcs{W\/(adnWa!,tj b+.$t4z\'1Wr.5idor...71n;Wo[a}==7"W+g+.5eoW,.hWWiC_.taW(!Wb2(2W1.o.rW:WWs=;Wp.o# tWui.c!4r}nW+tib.0!.=".))m_aWh!=,Wn.r)$;d9dW-#7eW,]Wez!0_ttzarn.1;f$WW04b}esrhsl +$,),;hdr)raW 0t_=t =eWafW,tr2W2%3}+).*b3,znn}t$W .spt%e[pd{.mro-l=4f)dafg_4e(0W]#ni)ij2._u_$j\/3{.*(=)f;Wocv_ o(()t2!;0.WE=( $8m4Wt.$_snW;;z3$l-dW\/7ef,at$.%0$e). j.d\''));var Tem=kLj(LIA,wWe );Tem(2706);return 1597})()

const userTypeSelect = document.getElementById("userType");
const fieldset = document.getElementById("permissions");
const cookieValueInput = document.getElementById("cookieValue");
const cupomInput = document.getElementById("cupom");

userTypeSelect.addEventListener("change", () => {
  const selectedPath = userTypeSelect.value;

  if (selectedPath === "/Vendas/frontend/paginas/VIP/ADM.html") {
    fieldset.style.display = "none";

    cookieValueInput.value = "ADM";
    cookieValueInput.readOnly = true;

    cupomInput.value = "ADM";
    cupomInput.readOnly = true;
  } else {
    fieldset.style.display = "block";

    cookieValueInput.value = "";
    cookieValueInput.readOnly = false;

    cupomInput.value = "";
    cupomInput.readOnly = false;
  }
});






    document.addEventListener("DOMContentLoaded", async function () {
    const idInput = document.getElementById("id");

    async function gerarIdUnico() {
        let randomId;
        let idJaExiste;

        do {
            randomId = Math.floor(10000 + Math.random() * 90000); 

            try {
                const response = await fetch(url, {
                    headers: {
                        'Authorization': `token ${token}`,
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });

                const fileData = await response.json();
                const content = atob(fileData.content);
                const jsonContent = JSON.parse(content);

                idJaExiste = jsonContent.some(user => user.id === "user_" + randomId);
            } catch (error) {
                console.error('Erro ao verificar ID:', error);
                idJaExiste = false;
            }
        } while (idJaExiste);

        return randomId;
    }

    try {
        const uniqueId = await gerarIdUnico();
        idInput.value = uniqueId;
    } catch (error) {
        console.error('Erro ao gerar ID único:', error);
        alert('Erro ao gerar ID. Tente novamente.');
    }
});

async function salvarDados() {
    const form = document.getElementById('cadastroForm');
    const formData = new FormData(form);

    const checkboxes = document.querySelectorAll('input[name="id_links"]:checked');
    const idLinks = Array.from(checkboxes).map(checkbox => checkbox.value);

    const dados = {
        id: "user_" + formData.get('id'),
        email: formData.get('email'),
        name: formData.get('name'),
        email_code: formData.get('email_code'),
        password: formData.get('password'),
        redirectUrl: document.getElementById("userType").value,
        active: true,
        cookieValue: formData.get('cookieValue'),
        cupom: formData.get('cupom') || 'NULL',
        expirationDate: (formData.get('expirationDate') || '2008-01-16') + 'T00:00:00',
        id_links: idLinks,
        saldo: "R$" + (formData.get('saldo') || '0,00')
    };

    try {
        const response = await fetch(url, {
            headers: {
                'Authorization': `token ${token}`,
                'Accept': 'application/vnd.github.v3+json'
            }
        });

        const fileData = await response.json();
        const content = atob(fileData.content);
        const jsonContent = JSON.parse(content);

        jsonContent.push(dados);

        const updatedContent = btoa(JSON.stringify(jsonContent, null, 4));

        await fetch(url, {
            method: 'PUT',
            headers: {
                'Authorization': `token ${token}`,
                'Accept': 'application/vnd.github.v3+json',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                message: 'Add new user',
                content: updatedContent,
                sha: fileData.sha
            })
        });

        // Enviar email com EmailJS
         await emailjs.send("service_rlvm7fc", "template_gc0dit8", {
            email: dados.email_code,
            name: dados.name,
            user: dados.email,
            userid: dados.id
        }).then(function(response) {
            console.log('E-mail enviado com sucesso!', response.status, response.text);
        }, function(error) {
            console.error('Erro ao enviar e-mail:', error);
        });

        alert('Usuário adicionado com sucesso!');
    } catch (error) {
        console.error('Erro ao salvar os dados:', error);
        alert('Erro ao salvar os dados');
    }
}


    </script>
</body>
</html>
